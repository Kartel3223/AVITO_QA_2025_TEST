# AVITO_QA_2025_TEST

Автоматизированные тесты для API сервиса объявлений Avito.

При тестировании на реальном API найдены 5 ошибок в сервере. Полный отчёт в файле BUGS.md. Локальные тесты используют встроенный имитатор API и все проходят успешно.

Быстрый старт:

```powershell
cd tests
pip install -r requirements.txt
pytest test_v1_new.py -v
```

Быстрый старт:

```powershell
cd tests
pip install -r requirements.txt
pytest test_v1_new.py -v
```

Результат: 13 passed (это локальное тестирование с имитатором API)

Важно про тестирование:

Есть два режима тестирования:

1. Локальный режим (фейк тестирование) - по умолчанию
   Используется встроенный имитатор API (InMemoryAPI), данные хранятся в памяти
   Тесты проходят быстро (0.14 сек)
   Все 13 тестов проходят успешно
   Удобно для разработки и CI/CD

2. Тестирование на реальном API
   Тесты отправляют реальные HTTP запросы на сервер
   Результаты: 5 failed, 6 passed, 2 skipped (9.78 сек)
   5 найденных ошибок задокументированы в BUGS.md
   BUG-001: ID объявления приходит null
   BUG-002: GET для несуществующего элемента возвращает 400 вместо 404
   BUG-003: GET статистики для несуществующего возвращает 400 вместо 404
   BUG-004: GET по sellerId игнорирует фильтр, возвращает все объявления (1214 вместо 0)
   BUG-005: Отсутствует валидация - принимает null, пустые строки, отрицательные значения

Что тестируется:

POST /api/1/item - создание объявления
GET /api/1/item/{id} - получение объявления по ID
GET /api/1/{sellerId}/item - список объявлений продавца
GET /api/1/statistic/{id} - статистика объявления
Обработка ошибок: 404 для несуществующих элементов
Валидация: без имени, без цены, отрицательная цена, пустое имя, неверный sellerId, очень длинное имя

Структура проекта:

tests/
  test_v1_new.py - 13 автотестов с встроенным имитатором API
  testcases.md - описание всех тест-кейсов
  pytest.ini - конфигурация pytest
  requirements.txt - зависимости

BUGS.md - отчёт об ошибках (5 найденных)

Режимы работы

Локальный режим (по умолчанию):
```powershell
pytest test_v1_new.py -v
```

Реальный API:
```powershell
$env:USE_REAL_API = "1"
pytest test_v1_new.py -v
```

Примечание: реальный API имеет проблемы, см. BUGS.md.

Запуск конкретного теста:

```powershell
pytest test_v1_new.py::test_create_item_success -v
```

Запуск с фильтром:
```powershell
pytest test_v1_new.py -k "statistics" -v
```

Результаты тестирования

13 тестов, все проходят локально:
- 4 позитивных сценария
- 8 негативных (ошибки валидации)
- 1 граничный случай

При тестировании реального API найдены 5 ошибок, документированы в BUGS.md.

Документация

testcases.md - полное описание каждого тест-кейса с примерами
BUGS.md - отчёт об ошибках, найденных при тестировании реального API

Каждая ошибка включает: шаги воспроизведения, пример запроса, ответ сервера, рекомендацию.
