# AVITO_QA_2025_TEST

Автоматизированные тесты для API сервиса объявлений Avito.

Важно: При тестировании на реальном API найдены 5 ошибок в сервере. Полный отчёт в файле BUGS.md. Локальные тесты используют встроенный имитатор API и все проходят успешно.

## Быстрый старт

```powershell
cd tests
pip install -r requirements.txt
pytest test_v1_new.py -v
```

Результат: 13 passed (локальное тестирование с имитатором API)

## Два режима тестирования

Локальный режим (фейк тестирование) - по умолчанию:
- Используется встроенный имитатор API (InMemoryAPI)
- Данные хранятся в памяти программы
- Тесты проходят быстро (0.14 сек)
- Все 13 тестов проходят успешно
- Удобно для разработки и CI/CD

Тестирование на реальном API:
- Тесты отправляют реальные HTTP запросы на сервер
- Результаты: 5 failed, 6 passed, 2 skipped (9.78 сек)
- Найдены 5 ошибок (см. BUGS.md):
  - BUG-001: ID объявления приходит null
  - BUG-002: GET для несуществующего элемента возвращает 400 вместо 404
  - BUG-003: GET статистики для несуществующего возвращает 400 вместо 404
  - BUG-004: GET по sellerId игнорирует фильтр, возвращает все объявления (1214 вместо 0)
  - BUG-005: Отсутствует валидация - принимает null, пустые строки, отрицательные значения

## Что тестируется

- POST /api/1/item - создание объявления
- GET /api/1/item/{id} - получение объявления по ID
- GET /api/1/{sellerId}/item - список объявлений продавца
- GET /api/1/statistic/{id} - статистика объявления
- Обработка ошибок: 404 для несуществующих элементов
- Валидация: без имени, без цены, отрицательная цена, пустое имя, неверный sellerId, очень длинное имя

## Структура проекта

```
tests/
  test_v1_new.py        13 автотестов с встроенным имитатором API
  testcases.md         Описание всех тест-кейсов
  pytest.ini           Конфигурация pytest
  requirements.txt     Зависимости

BUGS.md                Отчёт об ошибках (5 найденных)
```

## Как запустить

Локальный режим (по умолчанию):
```powershell
pytest test_v1_new.py -v
```

Реальный API:
```powershell
$env:USE_REAL_API = "1"
pytest test_v1_new.py -v
```

Конкретный тест:
```powershell
pytest test_v1_new.py::test_create_item_success -v
```

С фильтром:
```powershell
pytest test_v1_new.py -k "statistics" -v
```

## Результаты

Локальное тестирование (13 тестов):
- 4 позитивных сценария
- 8 негативных (ошибки валидации)
- 1 граничный случай
- Все проходят успешно

Реальный API (13 тестов):
- 6 passed
- 5 failed (найдены баги)
- 2 skipped

## Документация

- testcases.md - полное описание каждого тест-кейса с примерами
- BUGS.md - отчёт об ошибках реального API с шагами воспроизведения и рекомендациями
